1RANDOMIZE::CALL CLEAR::Z=0::Y=1::A=Z::T=Z::V=13::C=44::D=Z::E=Z::R=Z::X=2::I=Z::J=Z::DIM AR(44)::G=100::H=4::K=512::L=32::U=16::N=255::O=99::F=65535::Q=6::S=3841::B=4096::M=39::P=Y::W=Z::FOR I=Z TO C::READ AR(I)::NEXT I
2PRINT "WELCOME TO THE BATTLE SYSTEM TEST!"::PRINT::PRINT
3PRINT "TWO SOLDIERS APPROACH."::PRINT
4IF AR(V*A)=Z THEN 7
5IF A=Z THEN 23
6T=Z::GOTO 45
7IF AR(Z)=Z THEN 94
8A=A+Y::IF A<>Z THEN T=Z
9IF AR(V*A)=Z THEN A=A+Y
10IF A>X THEN A=Z
11D=Z::IF AR(V*Y)=Z THEN D=D+Y
12IF AR(V*X)=Z THEN D=D+Y
13IF D=X THEN 15
14GOTO 4
15PRINT "YOU ARE VICTORIOUS."::PRINT::W=W+Y::A=Z::T=Z::IF W>=10 THEN GOSUB 21
16FOR I=Y TO X::AR(I*V)=AR(I*V+Y)::NEXT I::GOSUB 82::IF R<12.5 THEN PRINT "YOU OBTAINED A POTION!"
17IF R<12.5 THEN PRINT
18IF R<12.5 THEN P=P+Y
19IF P>O THEN P=O
20GOTO 3
21GOSUB 82::IF R>=25 THEN RETURN
22FOR I=V TO M-Y::AR(I)=AR(I)*1.5::NEXT I::PRINT "THE ENEMIES HAVE POWERED UP!"::PRINT::RETURN
23PRINT::PRINT AR(Z);"/";AR(Y);"HP"::PRINT AR(X);"/";AR(3);"MP"::PRINT::PRINT "(A) ATTACK"::PRINT "(M) MAGIC"::PRINT "(I) ITEMS"::PRINT "(Q) QUIT"
24CALL KEY(0,C,AA)::IF AA=0 THEN 24
25A$=CHR$(C)::IF A$="A" THEN 30
26IF A$="M" THEN 34
27IF A$="I" THEN 40
28IF A$="Q" THEN 95
29GOTO 23
30GOSUB 83::IF C=Z THEN 23
31IF C>X THEN 30
32IF C<Z THEN 30
33GOTO 45
34PRINT::PRINT "(1) LIGHTNING -";AR(M);"MP"::PRINT "(2) CURE -";AR(M+3);"MP"::PRINT "WHICH SPELL DO YOU WANT TO CAST?"::PRINT "TYPE (0) TO GO BACK."
35CALL KEY(0,C,AA)::IF AA=0 THEN 35
36A$=CHR$(C)::C=VAL(A$)::IF C=Y THEN 64
37IF C=X THEN 74
38IF C=Z THEN 23
39GOTO 34
40PRINT::PRINT "(1) POTION -";P::PRINT "WHICH ITEM DO YOU WISH TO USE?"::PRINT "TYPE (0) TO GO BACK."
41CALL KEY(0,C,AA)::IF AA=0 THEN 41
42A$=CHR$(C)::C=VAL(A$)::IF C=Y THEN 77
43IF C=Z THEN 23
44GOTO 40
45C=((AR(A*V+10)/H)+(AR(A*V+5)))+AR(A*V+7)-AR(T*V+7)::GOSUB 82::I=AR(A*V+11)::GOSUB 90::IF D>R THEN C=N
46I=AR(T*V+11)::GOSUB 90::IF D>R THEN C=N
47IF R<C THEN 51
48IF T>Z THEN PRINT "YOUR ATTACK MISSED!"
49IF T=Z THEN PRINT "SOLDIER";A;"MISSED YOU!"
50PRINT::GOTO 7
51D=AR(A*V+H)::E=AR(A*V+12)::C=D+((D+E)/L)*((D*E)/L)::D=((U*(K-AR(T*V+Q)))*C)/(U*K)::C=(AR(A*V+11)+AR(A*V+12)-AR(T*V+12))/H::GOSUB 91::IF R<=C THEN 53
52GOTO 54
53D=INT(D*X)
54D=INT(D*(S+(RND*N))/B)::IF D=Z THEN D=Y
55AR(T*V)=AR(T*V)-D::IF AR(T*V)<=Z THEN AR(T*V)=Z
56IF A<>Z THEN 60
57PRINT "YOU HIT SOLDIER";T;"FOR";D;"HP."::PRINT::IF AR(T*V)<>Z THEN 59
58PRINT "YOU DEFEATED SOLDIER";T::PRINT
59GOTO 7
60IF D>Z THEN GOSUB 92
61PRINT "SOLDIER";A;"HIT YOU FOR";D;"HP."::PRINT::IF AR(Z)<>Z THEN 63
62PRINT "YOU DIED."::PRINT
63GOTO 7
64E=Z::D=Z::IF AR(M)>AR(X) THEN 73
65AR(X)=AR(X)-AR(M)::GOSUB 83::IF C=Z THEN 34
66IF C>X THEN 64
67IF C<Z THEN 64
68C=AR(M+X)+AR(A*V+12)-((AR(T*V+12))/X)-Y::GOSUB 82::IF R<C THEN GOSUB 93
69IF R>C THEN 71
70D=(AR(M+Y)*(K-AR(T*V+9))*C)/(U*K)
71IF D>Z THEN 54
72PRINT "YOUR SPELL MISSED."::PRINT::GOTO 7
73PRINT::PRINT "YOU DON'T HAVE ENOUGH MP TO CAST THAT SPELL."::GOTO 34
74E=3::IF AR(M+3)>AR(X) THEN 73
75AR(X)=AR(X)-AR(M+3)::GOSUB 93::D=C+22*AR(M+Y+E)::D=INT(D*(S+(RND*N))/B)::PRINT::PRINT "YOU HAVE BEEN HEALED FOR";D;"HP."::PRINT::AR(Z)=AR(Z)+D::IF AR(Z)>AR(Y) THEN AR(Z)=AR(Y)
76GOTO 7
77IF P=Z THEN PRINT
78IF P=Z THEN PRINT "YOU HAVE NO POTIONS."
79IF P=Z THEN 23
80AR(Z)=AR(Z)+G::IF AR(Z)>AR(Y) THEN AR(Z)=AR(Y)
81P=P-Y::PRINT::PRINT "YOU HAVE BEEN HEALED FOR 100 HP."::PRINT::GOTO 7
82R=INT(RND*G)::RETURN
83PRINT::FOR I=Y TO X::IF AR(V*I)>Z THEN PRINT "(";I;")";" SOLDIER";I
84NEXT I::PRINT "WHICH ENEMY DO YOU WANT TO TARGET?"::PRINT "(0) TO GO BACK."
85CALL KEY(0,C,AA)::IF AA=0 THEN 85
86A$=CHR$(C)::C=VAL(A$)::IF C=Z THEN RETURN
87E=Z::IF AR(V*C)<=Z THEN E=N
88IF E=N THEN 83
89T=C::PRINT::RETURN
90D=I/H::RETURN
91R=((RND*F)*O/F)+Y::RETURN
92FOR J=Z TO G::NEXT J::CALL SOUND(220,1398,2)::RETURN
93C=Q*(AR(8)+AR(12))::RETURN
94PRINT::PRINT "GAME OVER"::PRINT::FOR I=Z TO Y::GOSUB 92::NEXT I
95PRINT::PRINT "YOU WON";W;"TIMES."::PRINT::END::DATA 314,314,54,54,38,96,24,1,21,17,6,14,6,30,30,0,0,6,1,4,1,1,1,50,4,2,30,30,0,0,6,1,4
96DATA 1,1,1,50,4,2,4,8,100,5,5,255
